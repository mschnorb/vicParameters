bulwa_hru_old2$AREA_FRAC <- AREA
View(bulwa_hru_old2)
plot_veg_hypsometry(bulwa_hru_old2)
rm(AREA, BAREA, CAREA)
rm(dlcass, delev)
rm(all_hru)
rm(dclass)
ggsave("figures/bulwa_hru_oldstyle.png", width=8, height=6, units="in", dpi=600)
plot_veg_hypsometry(bulwa_hru_389273)
ggsave("figures/bulwa_hru_newstyle.png", width=8, height=6, units="in", dpi=600)
View(bulwa_hru_old2)
View(bulwa_hru_389273)
View(bulwa_hru_old1)
bulwa_hru_389273$CUM_AREA_FRAC <- cumsum(bulwa_hru_389273$AREA_FRAC)
View(bulwa_hru_389273)
df1 <- subset(bulwa_hru_389273, CUM_AREA_FRAC < 0.2)
df2 <- subset(bulwa_hru_389273, CUM_AREA_FRAC >= 0.2 & CUM_AREA_FRAC < 0.4)
df3 <- subset(bulwa_hru_389273, CUM_AREA_FRAC >= 0.4 & CUM_AREA_FRAC < 0.6)
df4 <- subset(bulwa_hru_389273, CUM_AREA_FRAC >= 0.6 & CUM_AREA_FRAC < 0.8)
df5 <- subset(bulwa_hru_389273, CUM_AREA_FRAC >= 0.8 & CUM_AREA_FRAC < 1.01)
df <- list(df1, df2, df3, df4,df5)
temp2_hru <- do.call(rbind,lapply(df, summarize.df))
dclass <- ddply(bulwa_hru_389273, .(CLASS), summarize, AREA=sum(AREA_FRAC))
delev <- ddply(bulwa_hru_389273, .(BAND_ID), summarize, AREA=sum(AREA_FRAC))
CAREA <- rep(dclass$AREA, 5)
BAREA <- rep(delev$AREA,each=7)
AREA <- BAREA*CAREA
dclass
delev
delev <- ddply(temp2_hru, .(BAND_ID), summarize, AREA=sum(AREA_FRAC))
dclass <- ddply(temp2_hru, .(CLASS), summarize, AREA=sum(AREA_FRAC))
delev
dclass
CAREA <- rep(dclass$AREA, 5)
BAREA <- rep(delev$AREA,each=7)
AREA <- BAREA*CAREA
View(temp2_hru)
View(bulwa_hru_old2)
bulwa_hru_old2 <- temp2_hru
rm(temp2_hru)
View(bulwa_hru_old2)
bulwa_hru_old2$AREA_FRAC <- AREA
df <- list(df1, df2, df3, df4, df5)
temp2_hru <- do.call(rbind,lapply(df, summarize.df))
View(temp2_hru)
View(bulwa_hru_389273)
View(bulwa_hru_old2)
View(bulwa_hru_old2)
expand.grid(dclass$CLASS, delev$BAND_ID)
temp2 <- expand.grid(dclass$CLASS, delev$BAND_ID)
View(temp2)
names(temp2) <- c("CLASS", "ELEVATION")
temp2$BAND_ID <- temps$ELEVATION
View(temp2)
temp2$BAND_ID <- temp2$ELEVATION
temp2$CELL_ID <- 389273
temp2$AREA_FRAC <- AREA
plot_veg_hypsometry(temp2)
bulwa_hru_old2 <- temp2
plot_veg_hypsometry(bulwa_hru_old2)
ggsave("figures/bulwa_hru_oldstyle.png", width=8, height=6, units="in", dpi=600)
rm(df1, df2, df3, df4, df5, df)
rm(temp2, temp2_hru)
rm(delev, dclass)
View(bulwa_hru)
install.packages(c("coda", "fields", "lme4", "maps", "mgcv", "ncdf4", "Rcpp", "rgeos", "sp", "spam", "stringi"))
hru_BULWA <- read.csv("Y:/Work/PCIC/VIC/DATA/HRU_412/scratch/hru_BULWA.txt", stringsAsFactors=FALSE)
View(hru_BULWA)
names(hru_BULWA) <- c("LON", "LAT", "CELL_ID", "BAND_ID", "HRU_ID", "CLASS", "AREA", "ELEVATION")
View(hru_BULWA)
temp <- arrane(hru_BULWA, CELL_ID, BAND_ID, class)
temp <- arrange(hru_BULWA, CELL_ID, BAND_ID, class)
temp <- arrange(hru_BULWA, CELL_ID, BAND_ID, CLASS)
View(temp)
cell <- unique(temp$CELL_ID)
cell <- unique(temp$CELL_ID)
cell
length(cell)
rm(cell)
rm(temp)
temp <- ddply(hru_BULWA, .(CELL_ID), summarise, AREA=sum(AREA))
View(temp)
tt <- vapply(hru_BULWA$CELL_ID, function(x){ii <- which(temp$CELL_ID == x); return(temp$AREA[ii])})
warnings()
tt <- vapply(hru_BULWA$CELL_ID, function(x){ii <- which(temp$CELL_ID == x); return(temp$AREA[ii])})
tt <- sapply(hru_BULWA$CELL_ID, function(x){ii <- which(temp$CELL_ID == x); return(temp$AREA[ii])})
tt
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
area_frac <- hru_BULWA$AREA/tt
area_frac
area_frac
0.103488/31.04781
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
View(bulwa_hru)
0.021432/0.0625/0.0625
0.0625^2
View(temp)
temp$ARE_FRAC <- hru_BULWA$AREA/temp$AREA
temp$ARE_FRAC <- hru_BULWA$AREA/temp$AREA
rm(temp)
tt_df <- cbind(hru_BULWA, hru_BULWA$AREA/tt)
View(tt_df)
names(tt_df)
names(tt_df)[9] <- "AREA_FRAC"
View(tt_df)
ttt <- ddply(tt.df, .(CELL_ID), summarise, AREA=sum(AREA_FRAC))
ttt <- ddply(tt_df, .(CELL_ID), summarise, AREA=sum(AREA_FRAC))
View(ttt)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
tm(tt, tt_df, ttt)
rm(tt, tt_df, ttt)
View(summarize.df)
View(root_depths)
tt <- make_VIC_param(hru_BULWA, root_depths, write_vpf = TRUE, write_snb = TRUE)
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
tt <- make_VIC_param(hru_BULWA, root_depths, write_vpf = TRUE, write_snb = TRUE)
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
tt <- make_VIC_param(hru_BULWA, root_depths, write_vpf = TRUE, write_snb = TRUE)
View(cell_area_df)
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
tt <- make_VIC_param(hru_BULWA, root_depths, write_vpf = TRUE, write_snb = TRUE)
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
tt <- make_VIC_param(hru_BULWA, root_depths, write_vpf = TRUE, write_snb = TRUE)
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
tt <- make_VIC_param(hru_BULWA, root_depths, write_vpf = TRUE, write_snb = TRUE)
install.packages("Rcpp")
install.packages("stringi")
tt <- make_VIC_param(hru_BULWA, root_depths, write_vpf = TRUE, write_snb = TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
tt <- make_VIC_param(hru_BULWA, root_depths, write_vpf = TRUE, write_snb = TRUE)
str(tt)
summary(tt)
str(tt, max.level = 2)
str(tt, max.level = 1)
tt$VPARAM[1]
sum(tt$VPARAM[1]$AFRAC)
tt$VPARAM[[1]]
tt$VPARAM[[1]]$AFRAC
tt$VPARAM[[1]][1]
tt$VPARAM[1][1]
tt$VPARAM[1]
str(tt$VPARAM[1])
str(tt$VPARAM[[1]])
str(tt$VPARAM[[1]][,2])
sum(tt$VPARAM[[1]][,2])
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
hru_columbia_part1 <- read.csv("Y:/Work/PCIC/VIC/DATA/HRU_412/columbia1/hru_columbia_part1.txt", stringsAsFactors=FALSE)
View(hru_columbia_part1)
hru_columbia_part1 <- hru_columbia_part1[-1:-2]
names(hru_columbia_part1) <- c("CELL_ID", "BAND_ID", "HRU_ID", "CLASS", "AREA", "ELEVATION")
str(tt, max.level = 1)
rm(tt)
View(bridge_hru)
?match
match("AREA_FRAC", names(hru_columbia_part1))
match("AREA_FRAC", names(bulwa_hru))
is.na(match("AREA_FRAC", names(bulwa_hru)))
is.na(match("AREA_FRAC", names(hru_columbia_part1)))
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/plot_veg_hypsometry.r')
plot_veg_hypsometry(hru_columbia_part1)
hru_columbia_part2 <- read.csv("Y:/Work/PCIC/VIC/DATA/HRU_412/columbia2/hru_columbia_part2.txt", stringsAsFactors=FALSE)
View(hru_columbia_part2)
hru_columbia_part3 <- read.csv("Y:/Work/PCIC/VIC/DATA/HRU_412/columbia3/hru_columbia_part3.txt", stringsAsFactors=FALSE)
View(hru_columbia_part3)
View(hru_columbia_part1)
nms <- hru_columbia_part1(names)
nms <- names(hru_columbia_part1)
hru_columbia_part2 <- hru_columbia_part2[-1:-2]
hru_columbia_part3 <- hru_columbia_part3[-1:-2]
names(hru_columbia_part2) <- nms
names(hru_columbia_part3) <- nms
View(hru_columbia_part2)
View(hru_columbia_part3)
hru_columbia <- rbind(hru_columbia_part1, hru_columbia_part2, hru_columbia_part3)
View(hru_columbia)
plot_veg_hypsometry(hru_columbia)
ggsave(filename = "figures/columbia_veg_hypsometry.png", width=8, height=6, units="in", dpi=600)
max(hru_columbia$ELEVATION)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/plot_hypsometry.r')
plot_hypsometry(hru_columbia)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/plot_hypsometry.r')
plot_hypsometry(hru_columbia)
ggsave(filename = "figures/columbia_hypsometry.png", width=8, height=6, units="in", dpi=600)
min(hru_columbia$ELEVATION
)
min(hru_columbia$BAND_ID)
ii <- which(hru_columbia$BAND_ID < 50)
length(ii)
t <- hru_columbia[ii,]
View(t)
sum(hru_columbia$AREA)
iii <- which(hru_columbia$ELEVATION < 0)
tt <- hru_columbia[iii,]
View(tt)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/checkHRUQuality.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/checkHRUQuality.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/checkHRUQuality.r')
rm(ii, iii, t, tt)
rm(nms)
rm(AREA, area_frac, BAREA)
rm(CAREA)
t <-checkHRUQuality(hru_columbia)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/checkHRUQuality.r')
t <-checkHRUQuality(hru_columbia)
View(t)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/checkHRUQuality.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/checkHRUQuality.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/checkHRUQuality.r')
t <-checkHRUQuality(hru_columbia)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/checkHRUQuality.r')
t <-checkHRUQuality(hru_columbia)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/summarizeHRU.r')
rm(checkHRUQuality())
rm(checkHRUQuality
)
library("plyr", lib.loc="C:/Apps/R-3.2.2/library")
ddply(hru_columbia, .(CLASS), summarize, AREA=sum(AREA))
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/summarizeHRU.r')
summarizeHRU(hru_columbia)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/summarizeHRU.r')
summarizeHRU(hru_columbia)
t <- summarizeHRU(hru_columbia, qc=TRUE)
col_hru_params <- make_VIC_param(t, root_depths, write_vpf = TRUE, write_snb = TRUE, max_bands = 44)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/summarizeHRU.r')
summarizeHRU(hru_columbia)
449388/20814
20814/91
20814/91 * 10 * 17
20814/91 * 10 * 17 /60 / 60
summarizeHRU(t)
hru_\
hru_columbia_qc <- t
rm(hru_columbia_part1)
rm(hru_columbia_part2)
rm(hru_columbia_part3)
rm(t)
plot_veg_hypsometry(hru_columbia_qc)
ggsave(filename = "figures/columbia_veg_hypsometry.png", width=8, height=6, units="in", dpi=600)
rep(c(1,2,3),31)
width <- c(11,4,2,4, rep(c(5,1,1,1),31))
width
file <- "Z:/data/climate/GHCN/GHCN_DAILY_3-22/all/CA1AB000001.dly"
t <- read.fwf(file, width)
file <- "Z:/data/climate/GHCN/GHCN_DAILY_3-22/all/ghcnd_all/CA1AB000001.dly"
t <- read.fwf(file, width)
View(t)
rm(t)
View(hru_columbia_qc)
summary(hru_columbia)
summary(hru_columbia_qc)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
rm(width)
rm(file)
gbulwa
rm(natft_cells)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
x = list(lat="LAT", lon="LON", zmean="elev_mean")
x$lat
x$zrange
if(x$zrange) print("true")
is.null(x$range)
!is.null(x$range)
!is.null(x$lat)
View(bridge_hru)
View(peyto_hru)
View(tiedemann_hru)
View(hru_BULWA)
peyto_200_hru <- read.csv("Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/peyto_200_hru.txt", stringsAsFactors=FALSE)
View(peyto_200_hru)
View(peyto_200_hru)
names(peyto_200_hru)
names(peyto_200_hru)[7] <- "AREA"
View(peyto_200_hru)
peyto_200_hru_params <- make_VIC_param(peyto_200_hru, root_depths,write_vpf = TRUE, write_snb = TRUE, max_bands = 6)
View(bridge_hru)
bridge_200_hru <- read.csv("Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/bridge_200_hru.txt", stringsAsFactors=FALSE)
View(bridge_200_hru)
View(peyto_200_hru)
temp <- bridge_200_hru[-5:-10]
View(temp)
names(temp) <- c("POLY_ID", "CLASS", "CELL_ID", "BAND_ID", "ELEVATION", "AREA")
bridge_200_hru <- temp
View(bridge_200_hru)
rm(temp)
bridge_200_hru_params <- make_VIC_param(bridge_200_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, max_bands = 15)
bridge_200_hru_params <- make_VIC_param(bridge_200_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, max_bands = 7)
peace_hru_100 <- read.csv("Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/peace_hru_100.txt", stringsAsFactors=FALSE)
View(peace_hru_100)
temp <- peace_hru_100[-5:-9]
View(temp)
names(temp) <- c("POLY_ID", "CLASS", "CELL_ID", "BAND_ID", "BAND_AREA", "ELEVATION", "AREA")
peace_hru_100 <- temp
rm(temp)
View(peace_hru_100)
elev <- unique(peace_hru_100$BAND_ID)
elev
elev <- unique(peace_hru_100$BAND_ID)
elev
rm(elev)
rm(peace_hru_100)
hru_tiedemann_200 <- read.csv("Y:/Work/PCIC/VIC/DATA/HRU_412/tiedemann200/hru_tiedemann_200.txt", stringsAsFactors=FALSE)
View(hru_tiedemann_200)
temp <- hru_tiedemann_200[-1:-2]
View(temp)
names(temp) <- c("CELL_ID", "BAND_ID", "POLY_ID", "CLASS", "BAND_AREA", "ELEVATION", "AREA")
el <- unique(temp$BAND_ID)
el
el <- sort(unique(temp$BAND_ID))
el
tiedemann_200_hru <- temp
rm(temp)
View(tiedemann_200_hru)
library("plyr", lib.loc="C:/Apps/R-3.2.2/library")
ddply(tiedemann_200_hru, .(CELL_ID), summarise, MIN=min(BAND_ID), MAX=max(BAND_ID))
tiedemann_200_hru_params <- make_VIC_param(tiedemann_200_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, vpf_filename = "vpf_tiedemann_200m.txt", snb_filename = "snb_tiedemann_200m.txt",  max_bands = 10)
rm(el)
plot_veg_hypsometry(bridge_hru)
plot_veg_hypsometry(bridge_200_hru)
plot_veg_hypsometry(peyto_hru)
plot_veg_hypsometry(peyto_200_hru)
plot_veg_hypsometry(tiedemann_hru)
plot_veg_hypsometry(tiedemann_200_hru)
tiedemann_500_hru <- read.csv("Y:/Work/PCIC/VIC/DATA/HRU_412/tiedemann500/tiedemann_500_hru.txt", stringsAsFactors=FALSE)
View(tiedemann_500_hru)
temp <- tiedemann_500_hru[-1:-2]
View(temp)
names(temp) <- c("CELL_ID", "BAND_ID", "POLY_ID", "CLASS", "BAND_AREA", "ELEVATION", "AREA")
tiedemann_500_hru <- temp
ddply(tiedemann_500_hru, .(CELL_ID), summarise, MIN=min(BAND_ID), MAX=max(BAND_ID))
el <- sort(unique(tiedemann_500_hru$BAND_ID))
el
View(tiedemann_500_hru)
tiedemann_500_hru_params <- make_VIC_param(tiedemann_500_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, vpf_filename = "vpf_tiedemann_500m.txt", snb_filename = "snb_tiedemann_500m.txt",  max_bands = 5)
plot_veg_hypsometry(tiedemann_500_hru)
tiedemann_100_hru_params <- tiedemann_hru_params
rm(tiedemann_hru_params)
rm(el)
bridge_100_hru_params <- bridge_hru_params
rm(bridge_hru_params)
col_100_hru_params <- col_hru_params
rm(col_100_hru_params)
col_100_hru_params <- col_hru_params
rm(col_hru_params)
peyto_100_hru_params <- peyto_hru_params
rm(peyto_hru_params)
rm(temp)
View(hru_tiedemann_200)
rm(hru_tiedemann_200)
View(tiedemann_hru)
tiedemann_100_hru <- tiedemann_hru
rm(tiedemann_hru)
place_100_hru_params <- place_hru_params
rm(place_hru_params)
bridge_100_hru <- bridge_hru
rm(bridge_hru)
peyto_100_hru <- peyto_hru
rm(peyto_hru)
place_100_hru <- place_hru
rm(place_hru)
hru_peyto_500 <- read.csv("Y:/Work/PCIC/VIC/DATA/HRU_412/peyto500/hru_peyto_500.txt", stringsAsFactors=FALSE)
View(hru_peyto_500)
temp <- hru_peyto_500[-1:-2]
View(temp)
names(temp) <- c("CELL_ID", "BAND_ID", "POLY_ID", "CLASS", "BAND_AREA", "ELEVATION", "AREA")
peyto_500_hru <- temp
rm(hru_peyto_500)
library("ggplot2", lib.loc="C:/Apps/R-3.2.2/library")
library("plyr", lib.loc="C:/Apps/R-3.2.2/library")
ddply(temp, .(CELL_ID), summarise, MIN=min(BAND_ID), MAX=max(BAND_ID))
el <- sort(unique(temp$BAND_ID))
el
rm(temp)
peyto_500_hru_params <- make_VIC_param(peyto_500_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, vpf_filename = "vpf_peyto_500m.txt", snb_filename = "snb_peyto_500m.txt")
peyto_500_hru_params <- make_VIC_param(peyto_500_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, vpf_filename = "vpf_peyto_500m.txt", snb_filename = "snb_peyto_500m.txt", max_bands = 3)
hru_place_500 <- read.csv("Y:/Work/PCIC/VIC/DATA/HRU_412/place500/hru_place_500.txt", stringsAsFactors=FALSE)
View(hru_place_500)
temp <- hru_place_500[-1:-2]
names(temp) <- c("CELL_ID", "BAND_ID", "POLY_ID", "CLASS", "BAND_AREA", "ELEVATION", "AREA")
View(temp)
rm(hru_place_500)
ddply(temp, .(CELL_ID), summarise, MIN=min(BAND_ID), MAX=max(BAND_ID))
el <- sort(unique(temp$BAND_ID))
el
place_500_hru <- temp
rm(temp)
place_500_hru_params <- make_VIC_param(place_500_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, vpf_filename = "vpf_place_500m.txt", snb_filename = "snb_place_500m.txt", max_bands = 5)
rm(el)
View(place_100_hru)
ddply(place_100_hru, .(CELL_ID), summarise, MIN=min(BAND_ID), MAX=max(BAND_ID))
sort(unique(place_100_hru$BAND_ID))
place_100_hru_params <- make_VIC_param(place_100_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, vpf_filename = "vpf_place_100m.txt", snb_filename = "snb_place_100m.txt", max_bands = 18)
names(place_100_hru)[8] <- "AREA"
place_100_hru_params <- make_VIC_param(place_100_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, vpf_filename = "vpf_place_100m.txt", snb_filename = "snb_place_100m.txt", max_bands = 18)
place_100_hru_params <- make_VIC_param(place_100_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, vpf_filename = "vpf_place_100m.txt", snb_filename = "snb_place_100m.txt", max_bands = 20)
hru_place_200 <- read.csv("Y:/Work/PCIC/VIC/DATA/HRU_412/place200/hru_place_200.txt", stringsAsFactors=FALSE)
View(hru_place_200)
temp <- hru_place_200[-1:-2]
names(temp) <- c("CELL_ID", "BAND_ID", "POLY_ID", "CLASS", "BAND_AREA", "ELEVATION", "AREA")
View(temp)
place_200_hru <- temp
View(place_200_hru)
rm(hru_place_200)
ddply(place_200_hru, .(CELL_ID), summarise, MIN=min(BAND_ID), MAX=max(BAND_ID))
sort(unique(place_200_hru$BAND_ID)
)
rm(temp)
place_200_hru_params <- make_VIC_param(place_200_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, vpf_filename = "vpf_place_200m.txt", snb_filename = "snb_place_200m.txt", max_bands = 12)
hru_bridge_500 <- read.csv("Y:/Work/PCIC/VIC/DATA/HRU_412/bridge500/hru_bridge_500.txt", stringsAsFactors=FALSE)
View(hru_bridge_500)
temp <- hru_bridge_500[-1:-2]
names(temp) <- c("CELL_ID", "BAND_ID", "POLY_ID", "CLASS", "BAND_AREA", "ELEVATION", "AREA")
View(temp)
bridge_500_hru <- temp
rm(temp)
ddply(bridge_500_hru, .(CELL_ID), summarise, MIN=min(BAND_ID), MAX=max(BAND_ID))
sort(unique(bridge_500_hru$BAND_ID)
)
bridge_500_hru_params <- make_VIC_param(bridge_500_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, vpf_filename = "vpf_bridge_500m.txt", snb_filename = "snb_bridge_500m.txt", max_bands = 5)
View(bulwa_hru)
bulwa_100_hru <- bulwa_hru
rm(bulwa_hru)
View(hru_bridge_500)
rm(hru_bridge_500)
View(hru_BULWA)
rm(hru_BULWA)
View(natft_hru)
hru_bulwa_200 <- read.csv("Y:/Work/PCIC/VIC/DATA/HRU_412/bulwa200/hru_bulwa_200.txt", stringsAsFactors=FALSE)
View(hru_bulwa_200)
bulwa_hru_200 <- hru_bulwa_200[-1:-2]
View(bulwa_hru_200)
names(bulwa_hru_200) <- names(bulwa_100_hru)
View(bulwa_100_hru)
View(bridge_500_hru)
names(bulwa_hru_200) <- names(bridge_500_hru)
plot_veg_hypsometry(bulwa_100_hru)
plot_veg_hypsometry(bulwa_200_hru)
plot_veg_hypsometry(bulwa_hru_200)
bulwa_200_hru <- bulwa_hru_200
rm(bulwa_hru_200)
bulwa_100_hru_params <- make_VIC_param(bulwa_200_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, vpf_filename = "vpf_bulwa_200m.txt", snb_filename = "snb_bulwa_200m.txt")
bulwa_100_hru_params <- make_VIC_param(bulwa_200_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, vpf_filename = "vpf_bulwa_200m.txt", snb_filename = "snb_bulwa_200m.txt", max_bands = 10)
hru_peace_100 <- read.csv("Y:/Work/PCIC/VIC/DATA/HRU_412/peace100/hru_peace_100.txt", stringsAsFactors=FALSE)
View(hru_peace_100)
peace_100_hru <- hru_peace_100[-1:-2]
View(peace_100_hru)
names(peace_100_hru) <- names(bulwa_200_hru)
sort(unique(peace_100_hru$BAND_ID))
ddply(peace_100_hru, .(CELL_ID), summarise, MIN=min(BAND_ID), MAX=max(BAND_ID))
ddply(peace_100_hru, .(CELL_ID), summarise, COUNT=max(BAND_ID)-min(BAND_ID))
peace_100_hru_params <- make_VIC_param(peace_100_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, vpf_filename = "vpf_peace_100m.txt", snb_filename = "snb_peace_100m.txt", max_bands = 15)
ddply(peace_100_hru, .(CELL_ID), summarise, COUNT=max(BAND_ID)-min(BAND_ID))
temp <- ddply(peace_100_hru, .(CELL_ID), summarise, COUNT=max(BAND_ID)-min(BAND_ID))
View(temp)
max(temp$COUNT)
peace_100_hru_params <- make_VIC_param(peace_100_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, vpf_filename = "vpf_peace_100m.txt", snb_filename = "snb_peace_100m.txt", max_bands = 22)
hru_bulwa_500 <- read.csv("Y:/Work/PCIC/VIC/DATA/HRU_412/bulwa500/hru_bulwa_500.txt", stringsAsFactors=FALSE)
View(hru_bulwa_500)
rm(temp)
hru_bulwa_200
rm(hru_bulwa_200)
View(hru_bulwa_500)
bulwa_500_hru <- hru_bulwa_500[-1:-2]
View(bulwa_500_hru)
names(bulwa_500_hru) <- names(bulwa_200_hru)
rm(hru_bulwa_500)
bulwa_200_hru_params <- bulwa_100_hru_params
bulwa_100_hru_params <- bulwa_hru_params
rm(bulwa_hru_params)
sort(unique(bulwa_500_hru$BAND_ID))
ddply(bulwa_500_hru, .(CELL_ID), COUNT=max(BAND_ID)-min(BAND_ID))
ddply(bulwa_500_hru, .(CELL_ID), summarise, COUNT=max(BAND_ID)-min(BAND_ID))\
ddply(bulwa_500_hru, .(CELL_ID), summarise, COUNT=max(BAND_ID)-min(BAND_ID))
ddply(bulwa_500_hru, .(CELL_ID), summarise, COUNT=(max(BAND_ID)-min(BAND_ID))/500
)
bulwa_500_hru_params <- make_VIC_param(bulwa_500_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, vpf_filename = "vpf_bulwa_500m.txt", snb_filename = "snb_bulwa_500m.txt", max_bands = 5)
plot_veg_hypsometry(bulwa_100_hru)
plot_veg_hypsometry(bulwa_200_hru)
plot_veg_hypsometry(bulwa_500_hru)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/plot_veg_hypsometry.r')
plot_veg_hypsometry(bulwa_100_hru)
plot_veg_hypsometry(bulwa_200_hru)
plot_veg_hypsometry(bulwa_500_hru)
plot_veg_hypsometry(bulwa_500_hru, by_cell = TRUE)
plot_veg_hypsometry(bulwa_100_hru)
ggsave("figures/bulwa_veg_hypso_100m.png", dpi=600, width=8, height=6, units="in")
plot_veg_hypsometry(bulwa_200_hru)
ggsave("figures/bulwa_veg_hypso_200m.png", dpi=600, width=8, height=6, units="in")
plot_veg_hypsometry(bulwa_500_hru)
ggsave("figures/bulwa_veg_hypso_500m.png", dpi=600, width=8, height=6, units="in")
tst <- "test.txt"
if(test) print("TRUE")
if(tst) print("TRUE")
if(isnull(tst)) print("TRUE")
if(is.null(tst)) print("TRUE")
if(!is.null(tst)) print("TRUE")
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/make_VIC_param.r')
