tiedemann_hru$AREA_FRAC <- tiedemann_hru$SAHPE_AREA/0.0625^2
View(tiedemann_hru)
names(tiedemann_hru)
names(tiedemann_hru)[4]
names(tiedemann_hru)[5]
names(tiedemann_hru)[5] <- "SHAPE_AREA"
View(tiedemann_hru)
plot_veg_hypsometry(tiedemann_hru)
plot_veg_hypsometry(tiedemann_hru, by_cell=FALSE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(tiedemann_hru)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(tiedemann_hru)
tiedemann_hru_params <- make_VIC_param(tiedemann_hru, root_depths)
order(tiedemann_hru$, tiedemann_hru$AREA_FRAC)
order(tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC)
tiedemann_hru[order(tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),]
tiedemann_hru[order(tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC, tiedemann_hru$CELL_ID),]
ggplot(tiedemann_hru[order(tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], aes(x=cumsum(AREA_FRAC), y=ELEVATION)) + goem_line()
ggplot(tiedemann_hru[order(tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], aes(x=cumsum(AREA_FRAC), y=ELEVATION)) + geom_line()
ggplot(tiedemann_hru[order(tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], aes(x=cumsum(AREA_FRAC), y=ELEVATION)) + geom_line() + facet_wrap(~CELL_ID)
ggplot(tiedemann_hru[order(tiedemann_hru$CELL_ID, tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], aes(x=cumsum(AREA_FRAC), y=ELEVATION)) + geom_line() + facet_wrap(~CELL_ID)
order(tiedemann_hru$CELL_ID, tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC)
tiedemann_hru[order(tiedemann_hru$CELL_ID, tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),]
ggplot(tiedemann_hru[order(tiedemann_hru$CELL_ID, tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], aes(x=cumsum(AREA_FRAC), y=ELEVATION, color=CELL_ID)) + geom_line()
ggplot(tiedemann_hru[order(tiedemann_hru$CELL_ID, tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], aes(x=cumsum(AREA_FRAC), y=ELEVATION, color=as.factor(CELL_ID))) + geom_line()
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
plot_hypsometry(tiedemann_hru)
plot_hypsometry(tiedemann_hru, by_cell=FALSE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
plot_hypsometry(tiedemann_hru, by_cell=FALSE)
plot_hypsometry(tiedemann_hru)
plot_hypsometry(tiedemann_hru)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
plot_hypsometry(tiedemann_hru)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
plot_hypsometry(tiedemann_hru)
ddply(tiedemann_hru, .(CELL_ID, ELEVATION))
ddply(tiedemann_hru, .(CELL_ID, ELEVATION), summarise, cumsum(AREA_FRAC))
ddply(tiedemann_hru, .(CELL_ID), summarise, cumsum(AREA_FRAC))
ddply(tiedemann_hru[order(tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], .(CELL_ID), summarise, cumsum(AREA_FRAC))
ddply(tiedemann_hru[order(tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], .(CELL_ID), summarise, cumsum(AREA_FRAC))[,2]
ddply(tiedemann_hru[order(tiedemann_hru$CELL_ID,tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], .(CELL_ID), summarise, cumsum(AREA_FRAC))[,2]
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
plot_hypsometry(tiedemann_hru)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
plot_hypsometry(tiedemann_hru)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
plot_hypsometry(tiedemann_hru)
plot_hypsometry(tiedemann_hru, by_cell=FALSE)
plot_hypsometry(place_hru)
plot_hypsometry(peyto_hru)
plot_hypsometry(bridge_hru)
plot_hypsometry(natft_hru)
plot_hypsometry(natft_hru, by_cell=FALSE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
source('~/.active-rstudio-document')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
make_VIC_param(tiedemann_hru, root_depths, write_vpf=TRUE, write_snb=TRUE)
tiedemann_hru_params$CELL_ID
plot_veg_hypsometry(tiedemann_hru)
plot_veg_hypsometry(tiedemann_hru, by_cell = TRUE)
plot_veg_hypsometry(peyto_hru, by_cell = TRUE)
plot_veg_hypsometry(place_hru, by_cell = TRUE)
plot_veg_hypsometry(bridge_hru, by_cell = TRUE)
View(bridge_hru)
plot_veg_hypsometry(bridge_hru)
x <- do.call(cbind, list(bridge_hru, peyto_hru, place_hru, tiedemann_hru))
x <- do.call(rbind, list(bridge_hru, peyto_hru, place_hru, tiedemann_hru))
View(x)
plot_veg_hypsometry(x)
x$basin <- "Bridge"
View(x)
x$basin[189:234] <- "Peyto"
View(x)
x$basin[235:355] <- "Place"
x$basin[356:553] <- "Tiedemann"
View(x)
all_hru <- x
rm(x)
View(all_hru)
plot_veg_hypsometry(all_hru, be_cell=TRUE)
plot_veg_hypsometry(all_hru, by_cell=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
library("ggplot2", lib.loc="C:/Apps/R-3.1.2/library")
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
ggsave(filename="veg_hpsometry.png", width=8, height=6, units="in", dpi=600)
getwd()
plot_veg_hypsometry(all_hru, by_cell=TRUE)
test <- c("a", "b", "c")
for (t in test) print(t)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
for (t in test) print(t)
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
ddply(all_hru, .(basin), summarize, Area = sum(AREA_FRAC))
library("plyr", lib.loc="C:/Apps/R-3.1.2/library")
ddply(all_hru, .(basin), summarize, Area = sum(AREA_FRAC))
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
ggsave(filename="veg_hpsometry.png", width=8, height=6, units="in", dpi=600)
ggsave(filename="veg_hpsometry.png", width=10, height=6, units="in", dpi=600)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
ggsave(filename="veg_hpsometry.png", width=10, height=6, units="in", dpi=600)
plot_veg_hypsometry(all_hru, by_basin=TRUE)
ggsave(filename="veg_hpsometry.png", width=10, height=6, units="in", dpi=600)
plot_veg_hypsometry(all_hru, by_basin=TRUE)
ggsave(filename="veg_hpsometry_v2.png", width=11, height=5, units="in", dpi=600)
ggsave(filename="veg_hpsometry_v2.svg", width=11, height=5, units="in", dpi=600)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
ggsave(filename="veg_hpsometry_v2.png", width=11, height=5, units="in", dpi=600)
ggsave(filename="veg_hpsometry_v2.svg", width=11, height=5, units="in", dpi=600)
View(peyto_hru)
View(root_depths)
peyto_hru_params$VPARAM
peyto_hru_params$BAND
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/make_VIC_param.r')
tm(t)
rm(t)
rm(test)
test <- make_VIC_param(peyto_hru, root_depths, null_glaciers = TRUE, write_vpf = TRUE, write_snb = TRUE)
test$VPARAM
test$VPARAM[1[]]
test$VPARAM[1]
test$VPARAM[[1]]
sum(test$VPARAM[[1]]$AFRAC)
sum(test$VPARAM[1]$AFRAC)
test$VPARAM[1]$AFRAC
test$VPARAM[1]
test$VPARAM[[1]]
test$VPARAM[[1]]$AFRAC
test$VPARAM[[1]][,2]
sum(test$VPARAM[[1]][,2])
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/make_VIC_param.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/make_VIC_param.r')
rm(test)
citation()
View(root_depths)
View(all_hru)
View(bridge_hru)
View(bridge_hru)
bulwa_hru_05 <- read.csv("Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/bulwa_hru_05.txt")
View(bulwa_hru_05)
bulwa_hru_06 <- read.csv("Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/bulwa_hru_06.txt")
View(bulwa_hru_06)
View(bulwa_hru_05)
View(bulwa_hru_06)
bulwa_hru <- cbind(bulwa_hru_05, bulwa_hru_06)
bulwa_hru <- rbind(bulwa_hru_05, bulwa_hru_06)
View(bulwa_hru)
plot_veg_hypsometry(bulwa_hru)
0.0625^2
bulwa_hru$AREA_FRAC <- bulwa_hru$SHAPE_AREA/0.0625^2
View(bulwa_hru)
plot_veg_hypsometry(bulwa_hru)
View(root_depths)
root_depths[20,]
root_depths[20,2]
root_depths[20,1:7]
root_depths[20,2:7]
root_depths[20,2:7] <- c(0.1, 0.55, 0.1, 0.40, 0.1, 0.05)
bulwa_hru_params <- make_VIC_param(bulwa_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, max_bands = 28)
bulwa_hru_params <- make_VIC_param(bulwa_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, max_bands = 20)
bulwa_hru_params <- make_VIC_param(bulwa_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, max_bands = 17)
plot_hypsometry(bulwa_hru)
plot_hypsometry(bulwa_hru, by_cell=TRUE)
plot_veg_hypsometry(bulwa_hru, by_cell=TRUE)
seq(1:22)
which(c(1,2,3)==seq(1:22))
match(c(1,2,3)==seq(1:22))
match(c(1,2,3),seq(1:22))
match(c(3,7,22),seq(1:22))
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/set_veg_legend.r')
set_veg_legend(c(1,2,3,6,8,10,19))
set_veg_legend(c(1,2,3,6,8,10,23))
set_veg_legend(c(1,2,3,6,8,10,23))$lbl
str(set_veg_legend(c(1,2,3,6,8,10,23))$lbl)
str(set_veg_legend(c(1,2,3,6,8,10,23)))
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/set_veg_legend.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(bulwa_hru)
View(bridge_hru)
unique(c(1,1,1,2,3,4,5,6,6,9))
plot_veg_hypsometry(bulwa_hru)
View(bulwa_hru)
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(bulwa_hru)
veg_class
sort(veg_class)
leg
leg$lbl
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(bulwa_hru)
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(bulwa_hru)
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(bulwa_hru)
veg_class
leg$clr
leg$lbl
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(bulwa_hru)
plot_veg_hypsometry(bulwa_hru)
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(bulwa_hru)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(bulwa_hru, by_cell = TRUE)
make_VIC_param(bulwa_hru, root_depths, null_glaciers = TRUE, write_vpf = TRUE)
bulwa_hru_params
str(bulwa_hru_params)
install.packages("randtoolbox")
install.packages(c("cluster", "distillery", "manipulate", "mgcv", "ncdf4", "Rcpp"))
plot_veg_hypsometry(bulwa_hru)
plot_veg_hypsometry(bulwa_hru, by_cell = TRUE)
View(bridge_hru)
View(all_hru)
View(tiedemann_hru)
View(root_depths)
View(peyto_hru)
View(bulwa_hru_06)
View(bulwa_hru_05)
View(bulwa_hru)
uniqu(bulwa_hru$CELL_ID)
unique(bulwa_hru$CELL_ID)
unique(bulwa_hru_05$CELL_ID)
unique(bulwa_hru_06$CELL_ID)
sort(unique(bulwa_hru$CELL_ID))
sort(unique(bulwa_hru_05$CELL_ID))
sort(unique(bulwa_hru_06$CELL_ID))
rm(bulwa_hru_05)
rm(bulwa_hru_06)
str(bulwa_hru_params, max.level=2)
str(bulwa_hru_params, max.level=1)
str(bulwa_hru_params$VPARAM, max.level=1)
str(bulwa_hru_params$VPARAM[1])
str(bulwa_hru_params$VPARAM[1][1])
str(bulwa_hru_params$VPARAM[[1]])
str(bulwa_hru_params$VPARAM[1][1,1])
str(bulwa_hru_params$VPARAM[1])
str(bulwa_hru_params$VPARAM[1]$)
str(bulwa_hru_params$VPARAM[1]$[1,1])
bulwa_hru_params$VPARAM[1]
bulwa_hru_params$VPARAM[1]$CLASS
bulwa_hru_params$VPARAM[1]$AFRAC
bulwa_hru_params$VPARAM[[1]]$AFRAC
bulwa_hru_params$VPARAM[[1]]
bulwa_hru_params$VPARAM[[1]][,1]
bulwa_hru_params$VPARAM[[1]][,2]
save(bulwa_hru, peyto_hru, file="hru_objects")
getwd()
View(root_depths)
plot_hypsometry(bulwa_hru)
library("ggplot2", lib.loc="C:/Apps/R-3.2.1/library")
plot_hypsometry(bulwa_hru)
plot_hypsometry(bulwa_hru, by_cell = TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/plot_hypsometry.r')
plot_hypsometry(bulwa_hru, by_cell = TRUE)
plot_veg_hypsometry(bulwa_hru)
plot_veg_hypsometry(bulwa_hru, by_cell = TRUE)
View(set_veg_legend)
View(set_veg_legend)
proc.time()
proc.time()
proc.time()
ptm <- proc.time()
proc.time()-ptm
proc.time()-ptm
proc.time()-ptm
proc.time()-ptm
proc.time()-ptm
proc.time()-ptm
install.packages("rvest")
library("rvest", lib.loc="C:/Apps/R-3.2.1/library")
t <- html("http://wateroffice.ec.gc.ca/report/report_e.html?mode=Table&type=realTime&stn=08HA003&dataType=Real-Time&startDate=2014-10-01&endDate=2015-09-15&prm1=47&y1Max=&y1Min=&prm2=-1&y2Max=&y2Min=")
rm(ptm)
str(t)
summary(t)
t %>% html_node("#rt-graph-tbl-data td") %>% html_text()
t %>% html_node("#rt-graph-tbl-data td")
t %>% html_node("#rt-graph-tbl-data td") %>% html_text()
t %>% html_node("td") %>% html_text()
html_node(t,"#rt-graph-tbl-data td")
html_node(t,"rt-graph-tbl-data td")
html_node(t,"#rt-graph-tbl-data")
html_node(t,"#rt-graph-tbl-data")t
t
install.packages("RCurl")
library("curl", lib.loc="C:/Apps/R-3.2.1/library")
curl_options()
browseURL("http://wateroffice.ec.gc.ca/report/report_e.html?mode=Table&type=realTime&stn=08HA003&dataType=Real-Time&startDate=2014-10-01&endDate=2015-09-15&prm1=47&y1Max=&y1Min=&prm2=-1&y2Max=&y2Min=")
t <- html("http://wateroffice.ec.gc.ca/report/report_e.html?mode=Table&type=realTime&stn=08HA003&dataType=Real-Time&startDate=2014-10-01&endDate=2015-09-15&prm1=47&y1Max=&y1Min=&prm2=-1&y2Max=&y2Min=")
t
rm(t)
t <- html("http://wateroffice.ec.gc.ca/report/report_e.html?mode=Table&type=realTime&stn=08HA003&dataType=Real-Time&startDate=2014-10-01&endDate=2015-09-15&prm1=47&y1Max=&y1Min=&prm2=-1&y2Max=&y2Min=")
library("rvest", lib.loc="C:/Apps/R-3.2.1/library")
t <- html("http://wateroffice.ec.gc.ca/report/report_e.html?mode=Table&type=realTime&stn=08HA003&dataType=Real-Time&startDate=2014-10-01&endDate=2015-09-15&prm1=47&y1Max=&y1Min=&prm2=-1&y2Max=&y2Min=")
t
library("RCurl", lib.loc="C:/Apps/R-3.2.1/library")
x <- postForm("http://wateroffice.ec.gc.ca/report/report_e.html?mode=Table&type=realTime&stn=08HA003&dataType=Real-Time&startDate=2014-10-01&endDate=2015-09-15&prm1=47&y1Max=&y1Min=&prm2=-1&y2Max=&y2Min=",)
x <- postForm("http://wateroffice.ec.gc.ca/report/report_e.html?mode=Table&type=realTime&stn=08HA003&dataType=Real-Time&startDate=2014-10-01&endDate=2015-09-15&prm1=47&y1Max=&y1Min=&prm2=-1&y2Max=&y2Min=", disclaimer_action="I Agree")
x
x <- htmll(postForm("http://wateroffice.ec.gc.ca/report/report_e.html?mode=Table&type=realTime&stn=08HA003&dataType=Real-Time&startDate=2014-10-01&endDate=2015-09-15&prm1=47&y1Max=&y1Min=&prm2=-1&y2Max=&y2Min=", disclaimer_action="I Agree"))
x <- html(postForm("http://wateroffice.ec.gc.ca/report/report_e.html?mode=Table&type=realTime&stn=08HA003&dataType=Real-Time&startDate=2014-10-01&endDate=2015-09-15&prm1=47&y1Max=&y1Min=&prm2=-1&y2Max=&y2Min=", disclaimer_action="I Agree"))
x
rm(x)
rm(t)
list("plyr", "ggplot")
gbulwa <- plot_veg_hypsometry(bulwa_hru)
gbulwa
gbulwa_bycell <- plot_veg_hypsometry(bulwa_hru, by_cell = TRUE)
gbulwa_bycell
ii <- order(bulwa_hru$CLASS, bulwa_hru$ELEVATION)
ii
temp <- bulwa_hru[ii,]
View(temp)
ggplot(data=temp, aes(x=ELEVATIO, y=cumsum(AREA_FRAC))) + geom_line(aes(color=CLASS))
ggplot(data=temp, aes(x=ELEVATION, y=cumsum(AREA_FRAC))) + geom_line(aes(color=CLASS))
ggplot(data=temp, aes(x=ELEVATION, y=cumsum(AREA_FRAC))) + geom_line(aes(color=as.factor(CLASS)))
ggplot(data=temp, aes(x=ELEVATION, y=cumsum(AREA_FRAC))) + geom_line(aes(color=factor(CLASS)))
temp2 <- ddply(temp, .(CLASS), cumsum)
library("plyr", lib.loc="C:/Apps/R-3.2.1/library")
temp2 <- ddply(temp, .(CLASS), cumsum)
temp2 <- ddply(temp[-1], .(CLASS), cumsum)
View(temp2)
rm(temp2)
temp2 <- ddply(temp[-1], .(CLASS), cumsum)
View(temp2)
temp3 <- cbind(temp, temp2$AREA_FRAC)
View(temp3)
ggplot(data=temp3, aes(x=ELEVATION, y=cumsum(AREA_FRAC))) + geom_line(aes(color=factor(CLASS)))
ggplot(data=temp3, aes(x=ELEVATION, y=cumsum(temp2$AREA_FRAC))) + geom_line(aes(color=factor(CLASS)))
ggplot(data=temp3, aes(x=ELEVATION, y=temp2$AREA_FRAC)) + geom_line(aes(color=factor(CLASS)))
ggplot(data=temp3, aes(x=ELEVATION, y=temp2$AREA_FRAC)) + geom_line(aes(color=factor(CLASS)))
sum(temp3$AREA_FRAC)
names(temp3)
names(temp3)[9]
names(temp3)[9] <- CAREA_FRAC
names(temp3)[9] <- "CAREA_FRAC"
rm(temp, temp2)
View(temp3)
temp3$CAREA_FRAC_N <- temp3$CAREA_FRAC/sum(temp3$AREA_FRAC)
ggplot(data=temp3, aes(x=ELEVATION, y=CAREA_FRAC_N)) + geom_line(aes(color=factor(CLASS)))
ggplot(data=temp3, aes(x=ELEVATION, y=CAREA_FRAC_N)) + geom_line(aes(color=factor(CLASS))) + coord_flip()
veg_class <- sort(unique(bulwa\$CLASS))
vc <- sort(unique(bulwa_hru$CLASS))
vc
eg <- set_veg_legend(vc)
leg <- eg
rm(eg)
leg
ggplot(data=temp3, aes(x=ELEVATION, y=CAREA_FRAC_N)) + geom_line(aes(color=factor(CLASS))) + scale_color_manual(labels = leg$lbl, values=leg$clr) + coord_flip()
ggplot(data=temp3, aes(x=ELEVATION, y=CAREA_FRAC_N)) + geom_line(aes(color=factor(CLASS)), size=1) + scale_color_manual(labels = leg$lbl, values=leg$clr) + coord_flip()
ggplot(data=temp3, aes(x=ELEVATION, y=CAREA_FRAC_N)) + geom_line(aes(color=factor(CLASS)), size=1) + scale_color_manual(labels = leg$lbl, values=leg$clr) + coord_flip() + theme_bw()
ggplot(data=temp3, aes(x=ELEVATION, y=CAREA_FRAC_N)) + geom_line(aes(color=factor(CLASS)), size=1) + scale_color_manual("CLass", labels = leg$lbl, values=leg$clr) + coord_flip() + theme_bw()
ggplot(data=temp3, aes(x=ELEVATION, y=CAREA_FRAC_N)) + geom_line(aes(color=factor(CLASS)), size=1) + scale_color_manual("Class", labels = leg$lbl, values=leg$clr) + coord_flip() + theme_bw()
ggplot(data=temp3, aes(x=ELEVATION, y=CAREA_FRAC_N)) +
geom_line(aes(color=factor(CLASS)), size=1) +
scale_color_manual("Class", labels = leg$lbl, values=leg$clr) +
labs(y="Elevation (m)", x="Cumulative Area Fraction", color="Landcover")
coord_flip() +
theme_bw()
ggplot(data=temp3, aes(x=ELEVATION, y=CAREA_FRAC_N)) +
geom_line(aes(color=factor(CLASS)), size=1) +
scale_color_manual("Land Cover", labels = leg$lbl, values=leg$clr) +
labs(y="Elevation (m)", x="Cumulative Area Fraction")
coord_flip() +
theme_bw()
ggplot(data=temp3, aes(x=ELEVATION, y=CAREA_FRAC_N)) +
geom_line(aes(color=factor(CLASS)), size=1) +
scale_color_manual("Land Cover", labels = leg$lbl, values=leg$clr) +
labs(y="Elevation (m)", x="Cumulative Area Fraction") +
coord_flip() +
theme_bw()
ggplot(data=temp3, aes(x=ELEVATION, y=CAREA_FRAC_N)) +
geom_line(aes(color=factor(CLASS)), size=1) +
scale_color_manual("Land Cover", labels = leg$lbl, values=leg$clr) +
labs(x="Elevation (m)", y="Cumulative Area Fraction") +
coord_flip() +
theme_bw()
ggplot(data=temp3, aes(x=ELEVATION, y=CAREA_FRAC_N)) +
geom_line(aes(color=factor(CLASS)), size=2) +
scale_color_manual("Land Cover", labels = leg$lbl, values=leg$clr) +
labs(x="Elevation (m)", y="Cumulative Area Fraction") +
coord_flip() +
theme_bw()
ggplot(data=temp3, aes(x=ELEVATION, y=CAREA_FRAC_N)) +
geom_line(aes(color=factor(CLASS)), size=1) +
scale_color_manual("Land Cover", labels = leg$lbl, values=leg$clr) +
labs(x="Elevation (m)", y="Cumulative Area Fraction", title="Cumulative Vegetation Hypsometry") +
coord_flip() +
theme_bw()
temp2 <- ddply(temp[-1], .(CLASS), cumsum)
temp2 <- ddply(bulwa_hru[ii,][-1], .(CLASS), cumsum)
View(temp2)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/plot_cum_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/plot_cum_veg_hypsometry.r')
plot_cum_veg_hypsometry(bulwa_hru)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/plot_cum_veg_hypsometry.r')
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/plot_cum_veg_hypsometry.r')
plot_cum_veg_hypsometry(bulwa_hru)
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/plot_cum_veg_hypsometry.r')
plot_cum_veg_hypsometry(bulwa_hru)
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/plot_cum_veg_hypsometry.r')
plot_cum_veg_hypsometry(bulwa_hru)
plot_cum_veg_hypsometry(bulwa_hru)
sum(hru_df$AREA_FRAC)
View(temp_df)
View(hru_df)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/plot_cum_veg_hypsometry.r')
plot_cum_veg_hypsometry(bulwa_hru)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/plot_cum_veg_hypsometry.r')
plot_cum_veg_hypsometry(bulwa_hru)
plot_cum_veg_hypsometry(bridgr_hru)
plot_cum_veg_hypsometry(bridge_hru)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/R.git/plot_cum_veg_hypsometry.r')
plot_cum_veg_hypsometry(bridge_hru)
plot_cum_veg_hypsometry(bulwa_hru)
ggsave("figures/bulwa_veg_hypsometry.png", width = 8, height=6, units="in", dpi=600)
plot_veg_hypsometry(bulwa_hru)
ggsave("figures/bulwa_veg_hypsometry.png", width = 8, height=6, units="in", dpi=600)
plot_cum_veg_hypsometry(bulwa_hru)
ggsave("figures/bulwa_cum_veg_hypsometry.png", width = 8, height=6, units="in", dpi=600)
min(bulwa_hru$ELEVATION)
max(bulwa_hru$ELEVATION)
sum((subset(bulwa_hru, CLASS==2)$AREA_FRAC)
)
sum((subset(bulwa_hru, CLASS==2)$AREA_FRAC))/50
sum((subset(bulwa_hru, CLASS==3)$AREA_FRAC))/50
sum((subset(bulwa_hru, CLASS==4)$AREA_FRAC))/50
sum((subset(bulwa_hru, CLASS==1)$AREA_FRAC))/50
sum((subset(bulwa_hru, CLASS==6)$AREA_FRAC))/50
sum((subset(bulwa_hru, CLASS==7)$AREA_FRAC))/50
sum((subset(bulwa_hru, CLASS==8)$AREA_FRAC))/50
sum((subset(bulwa_hru, CLASS==11)$AREA_FRAC))/50
sum((subset(bulwa_hru, CLASS==20)$AREA_FRAC))/50
sum((subset(bulwa_hru, CLASS==19)$AREA_FRAC))/50
