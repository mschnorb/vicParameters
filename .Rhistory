ddply(place_hru, .(CELL_ID, CLASS=22), summarize, sum(AREA_FRAC[which(CLASS==22)]))
ddply(bridge_hru, .(CELL_ID, CLASS=22), summarize, sum(AREA_FRAC[which(CLASS==22)]))
ddply(bridge_hru, .(CELL_ID, CLASS=22), summarize, sum(AREA_FRAC))
ddply(bridge_hru, .(CELL_ID, CLASS), summarize, sum(AREA_FRAC[which(CLASS==22)]))
ddply(bridge_hru, .(CELL_ID, CLASS=22), summarize, sum(AREA_FRAC[which(CLASS==22)]))
ddply(bridge_hru, .(CELL_ID, CLASS=19), summarize, sum(AREA_FRAC[which(CLASS==19)]))
ddply(bridge_hru, .(CELL_ID, CLASS=15), summarize, sum(AREA_FRAC[which(CLASS==15)]))
View(root_depths)
View(bridge_hru)
View(place_hru)
View(band_tmp)
rm(band_tmp)
rm(hru_tmp, hru_tmp2, hru_tmp3, hru_tmp4)
data
rm(data)
.04762*21
.07143*14
arrange(place_hru, CELL_ID, BAND_ID, CLASS)
band_tmp <- ddply(place_hru, .(CELL_ID, BAND_ID), summarise, AREA_FRAC=sum(ARE_FRAC), ELEVATION=mean(ELEVATION))
band_tmp <- ddply(place_hru, .(CELL_ID, BAND_ID), summarise, AREA_FRAC=sum(ARAE_FRAC), ELEVATION=mean(ELEVATION))
band_tmp <- ddply(place_hru, .(CELL_ID, BAND_ID), summarise, AREA_FRAC=sum(AREA_FRAC), ELEVATION=mean(ELEVATION))
View(band_tmp)
unique(band_tmp)
band_tmp[1]
band_tmp[1:2]
str(band_tmp[1:2])
unique(band_tmp[1:2])
(band_tmp[1:2][3])
(band_tmp[1:5,1:2])
(band_tmp[which(CELL_ID==376102),1:2])
(band_tmp[which(band_tmp$CELL_ID==376102),1:2])
(band_tmp[which(band_tmp$CELL_ID==376102),])
ddply(place_hru, .(CELL_ID=376102, CLASS), summarise, SHAPE_AREA=sum(SHAPE_AREA))
ddply(place_hru, .(CELL_ID=376102, CLASS, BAND_ID), summarise, SHAPE_AREA=sum(SHAPE_AREA))
ddply(place_hru, .(CELL_ID, CLASS, BAND_ID), summarise, SHAPE_AREA=sum(SHAPE_AREA))
x <- c(550, 650, 750, 850, 950, 1050, 1150, 1250, 1350, 1450, 1550)
x
for (x in x[1:5*2]){
print x
for (x in x[1:5*2]){print x}
for (i in x[1:5*2]){print i}
for (i in x){print i}
for (i in x) print i
for (i in 1:5) print i
for (i in 1:5) print (i)
for (i in x[1:5*2]){print (i)}
for (i in x[1:6*2]){print (i)}
seq(1,6,2)
for (i in seq(1,12,2)){print (i)}
for (i in x[seq(1,12,2)]){print (i)}
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/make_VIC_param.r')
View(place_hru)
View(root_depths)
place_hru_params <- make_VIC_param(place_hru, root_depths, write_vpf=TRUE, write_snb=TRUE)
sum(root_depths$RFRAC1, root_depths$RFRAC2, root_depths$RFRAC3)
apply(root_depths, 1, sum(root_depths$RFRAC1, root_depths$RFRAC2, root_depths$RFRAC3))
apply(root_depths, 1, function(x) {sum(root_depths$RFRAC1, root_depths$RFRAC2, root_depths$RFRAC3}))
apply(as.matric(root_depths), 1, function(x) {sum(root_depths$RFRAC1, root_depths$RFRAC2, root_depths$RFRAC3}))
apply(as.matrix(root_depths), 1, function(x) {sum(root_depths$RFRAC1, root_depths$RFRAC2, root_depths$RFRAC3}))
apply(as.matrix(root_depths), 1, function(x) {sum(x$RFRAC1, x$RFRAC2, x$RFRAC3}))
apply(as.matrix(root_depths), 1, function(x) {sum(x[3], x[5], x[7]}))
apply(as.matrix(root_depths), 1, function(x) {sum(x[3], x[5], x[7])})
apply(as.matrix(root_depths), 1, function(x) {sum(x)})
apply(as.matrix(root_depths), 1, function(x) {sum(x[1:5])})
root_depths[-7]
root_depths[-8]
apply(as.matrix(root_depths[-8]), 1, function(x) {sum(x[3], x[5], x[7])})
root_depth2[19:22]
root_depths[19:22]
root_depths[19:22,]
root_depths[19:22,]$RFRAC1=1
View(root_depths)
apply(as.matrix(root_depths[-8]), 1, function(x) {sum(x[3], x[5], x[7])})
place_hru_params <- make_VIC_param(place_hru, root_depths, write_vpf=TRUE, write_snb=TRUE)
place_hru_params$VPARAM
place_hru_params$VPARAM[1]
sum(place_hru_params$VPARAM[1]$AFRAC)
place_hru_params$VPARAM[1]$AFRAC
place_hru_params$VPARAM[1][2]
place_hru_params$VPARAM[[1]]
place_hru_params$VPARAM[[1]]$AFRAC
place_hru_params$VPARAM[[1]][,2]
sum(place_hru_params$VPARAM[[1]][,2])
sum(place_hru_params$BAND[[1]][,2])
place_hru_params$BAND[[1]]
sum(place_hru_params$BAND[[1]][,2])
place_hru_params$BAND[[2]]
sum(place_hru_params$BAND[[1]][,2])
sum(place_hru_params$BAND[[1]][1:10,2])
sum(place_hru_params$BAND[[1]][1:20,2])
sum(place_hru_params$BAND[[1]][1:18,2])
sum(place_hru_params$BAND[[1]][1:17,2])
sum(place_hru_params$BAND[[1]][1:16,2])
sum(place_hru_params$BAND[[1]][1:15,2])
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/make_VIC_param.r')
View(bridge_hru)
bridge_hru_params <- make_VIC_param(bridge_hru, root_depths, write_vpf=TRUE, write_snb=TRUE)
rm(i)
rm(x)
bridge_hru_params <- make_VIC_param(bridge_hru, root_depths, write_vpf=TRUE, write_snb=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/make_VIC_param.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/make_VIC_param.r')
bridge_hru_params <- make_VIC_param(bridge_hru, root_depths, write_vpf=TRUE, write_snb=TRUE)
nms
View(band_tmp)
place_hru_params$VPARAM
str(place_hru_params$VPARAM)
str(place_hru_params$VPARAM[[1]])
str(place_hru_params$VPARAM[1])
str(place_hru_params$VPARAM[[1]])
str(place_hru_params$VPARAM[[1]][,2])
sum(place_hru_params$VPARAM[[1]][,2])
sum(place_hru_params$VPARAM[[2]][,2])
sum(place_hru_params$BAND[[2]][,2])
sum(place_hru_params$BAND[[1]][,2])
bridge_hru_params$BAND[[2]][,2]
bridge_hru_params$BAND[[1]][,2]
bridge_hru_params$BAND[[1]][,1]
cumsum(bridge_hru_params$BAND[[1]][,2])
plot(cumsum(bridge_hru_params$BAND[[1]][,2]), bridge_hru_params$BAND[[1]][,1])
str(place_hru_params$BAND)
str(bridge_hru_params$BAND)
bridge_hru_params$BAND
lapply(bridge_hru_params$BAND, rbind)
sapply(bridge_hru_params$BAND, rbind)
str(bridge_hru_params$BAND[1])
str(bridge_hru_params$BAND[[1]])
lapply(bridge_hru_params$BAND, function(x){sum(x[,2])})
lapply(bridge_hru_params$BAND, function(x){sum(x[,1])})
sapply(bridge_hru_params$BAND, function(x){sum(x[,1])})
sapply(bridge_hru_params$BAND, function(x){sum(x[,2])})
sapply(bridge_hru_params$BAND, function(x){as.matrix(x)})
rbind(sapply(bridge_hru_params$BAND, function(x){as.matrix(x)}))
rbind(sapply(bridge_hru_params$BAND, function(x){as.data.frame(x)}))
bridge_hru_params$BAND
bridge_hru_params$BAND[1]
as.data.frame(bridge_hru_params$BAND[1])
as.data.frame(bridge_hru_params$BAND[2])
rbind(lapply(bridge_hru_params$BAND, function(x){as.data.frame(x)}))
rbind(sapply(bridge_hru_params$BAND, function(x){as.data.frame(x)}))
str(rbind(sapply(bridge_hru_params$BAND, function(x){as.data.frame(x)})))
sapply(bridge_hru_params$BAND, function(x){as.data.frame(x)})
lapply(bridge_hru_params$BAND, function(x){as.data.frame(x)})
str(lapply(bridge_hru_params$BAND, function(x){as.data.frame(x)}))
temp <- lapply(bridge_hru_params$BAND, function(x){as.data.frame(x)})
rbind(sapply(temp, function(x){x}))
sapply(temp, function(x){x})
rm(temp)
sapply(bridge_hru_params$BAND, function(x){as.data.frame(x)}, simplify="array")
str(sapply(bridge_hru_params$BAND, function(x){as.data.frame(x)}, simplify="array"))
library("plyr", lib.loc="~/R/win-library/3.0")
temp <- ddply(bridge_hru, .(CLASS, CELL_ID, ELEVATION))
View(temp)
library("ggplot2", lib.loc="~/R/win-library/3.0")
ggplot(temp, aes(x=ELEVATION, y=cumsum(AREA_FRAC))) + geom_line(color=CLASS)
ggplot(temp, aes(x=ELEVATION, y=cumsum(AREA_FRAC))) + geom_line(aes(color=CLASS))
ggplot(temp, aes(x=ELEVATION, y=cumsum(AREA_FRAC))) + geom_line()
ggplot(temp, aes(x=ELEVATION, y=cumsum(AREA_FRAC))) + geom_line(aes(color=factor(CLASS))
)
ggplot(temp, aes(x=ELEVATION, y=AREA_FRAC)) + geom_line()
ggplot(temp, aes(x=ELEVATION, y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC), color=factor(CLASS)))
temp <- ddply(bridge_hru, .(CLASS, CELL_ID, ELEVATION), sort)
View(temp)
temp <- ddply(bridge_hru, .(CLASS, CELL_ID, ELEVATION), summarise, elev=sort(ELEVATION))
View(temp)
temp <- ddply(bridge_hru, .(CLASS, CELL_ID, ELEVATION), sort, ELEVATION)
temp <- ddply(bridge_hru, .(CLASS, CELL_ID, ELEVATION))
ggplot(temp, aes(x=sort(ELEVATION), y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC), color=factor(CLASS)))
ggplot(temp, aes(x=sort(ELEVATION), y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)))
View(temp)
ggplot(temp, aes(x=sort(ELEVATION), y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6) + facet_wrap(~CLASS)
)
ggplot(temp, aes(x=sort(ELEVATION), y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6)) + facet_wrap(~CLASS)
ggplot(temp, aes(x=sort(ELEVATION), y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)))
ggplot(temp, aes(x=sort(ELEVATION), y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS))) + theme_bw()
ggplot(temp, aes(x=sort(ELEVATION), y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)), size=1) + theme_bw()
ii <- order(temp$CLASS, temp$CELL_ID, temp$ELEVATION)
ii
ii <- order(temp$ELEVATION, temp$CLASS, temp$CELL_ID)
ii
ii <- order(temp$CLASS, temp$CELL_ID, temp$ELEVATION, temp$AREA_FRAC)
ii
ii <- order(temp$CLASS, temp$CELL_ID, temp$BAND_ID)
ii
ii <- order(temp$CLASS, temp$ELEVATION)
ii
ii <- order(temp$CLASS, temp$ELEVATION, temp$CELL_ID)
temp2 <- temp[ii,]
View(temp2)
ggplot(temp2, aes(x=ELEVATION, y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)), size=1) + theme_bw()
ggplot(temp, aes(x=ELEVATION, y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6)) + facet_wrap(~CLASS)
ggplot(temp2, aes(x=ELEVATION, y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6)) + facet_wrap(~CLASS)
ggplot(temp2, aes(x=ELEVATION, y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6)) + facet_wrap(~CLASS) + scale_x_log19()
ggplot(temp2, aes(x=ELEVATION, y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6)) + facet_wrap(~CLASS) + scale_y_log10()
ggplot(temp2, aes(x=ELEVATION, y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)), size=1) + theme_bw() + scale_y_log10()
ggplot(temp2, aes(x=ELEVATION, y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)), size=1) + theme_bw() + scale_y_log10(breaks=c(0.01, .1, .2, .5, 1))
ggplot(temp2, aes(x=ELEVATION, y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)), size=1) + theme_bw() + scale_y_log10(breaks=c(0.01, ,.05, .1, .5, 1))
ggplot(temp2, aes(x=ELEVATION, y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)), size=1) + theme_bw() + scale_y_log10(breaks=c(0.01,.05,.1,.5,1))
ggplot(temp2, aes(x=ELEVATION, y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)), size=1) + theme_bw() + scale_y_log10(breaks=c(0.001, 0.01,.05,.1,.5,1))
ggplot(temp2, aes(x=ELEVATION, y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)), size=1) + theme_bw() + scale_y_log10(breaks=c(0.001, .005, 0.01,.05,.1,.5,1))
ggplot(temp2, aes(x=ELEVATION, y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)), size=1) + theme_bw() + scale_y_log10(breaks=c(0.001, .002, .005, 0.01, .02, .05, .1, .2, .5, 1))
ggplot(temp2, aes(x=ELEVATION, y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)), size=1) + theme_bw() + scale_y_log10(breaks=c(0.001, .002, .005, 0.01, .02, .05, .1, .2, .5, 1)) + labs(x="Elevetation (m))", y="Area Fraction", color="Land Cover", title="Vegetation Class Hysometry")
ggplot(temp2, aes(x=ELEVATION, y=AREA_FRAC)) + geom_line(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)), size=1) + theme_bw() + scale_y_log10(breaks=c(0.001, .002, .005, 0.01, .02, .05, .1, .2, .5, 1)) + labs(x="Elevetation (m)", y="Area Fraction", color="Land Cover", title="Vegetation Class Hysometry")
ggplot(temp2, aes(x=ELEVATION, y=AREA_FRAC)) + geom_rect(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)), size=1) + theme_bw() + scale_y_log10(breaks=c(0.001, .002, .005, 0.01, .02, .05, .1, .2, .5, 1)) + labs(x="Elevetation (m)", y="Area Fraction", color="Land Cover", title="Vegetation Class Hysometry")
ggplot(temp2, aes(x=ELEVATION, y=AREA_FRAC)) + geom_bar(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)), size=1) + theme_bw() + scale_y_log10(breaks=c(0.001, .002, .005, 0.01, .02, .05, .1, .2, .5, 1)) + labs(x="Elevetation (m)", y="Area Fraction", color="Land Cover", title="Vegetation Class Hysometry")
ggplot(temp2, aes(x=ELEVATION, y=AREA_FRAC)) + geom_bar(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)), stat="identity") + theme_bw() + scale_y_log10(breaks=c(0.001, .002, .005, 0.01, .02, .05, .1, .2, .5, 1)) + labs(x="Elevetation (m)", y="Area Fraction", color="Land Cover", title="Vegetation Class Hysometry")
ggplot(temp2, aes(x=ELEVATION, y=AREA_FRAC)) + geom_bar(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)), stat="identity") + theme_bw() + labs(x="Elevetation (m)", y="Area Fraction", color="Land Cover", title="Vegetation Class Hysometry")
ggplot(temp2, aes(x=BAND_ID, y=AREA_FRAC)) + geom_bar(aes(y=cumsum(AREA_FRAC)/6, color=factor(CLASS)), stat="identity") + theme_bw() + labs(x="Elevetation (m)", y="Area Fraction", color="Land Cover", title="Vegetation Class Hysometry")
ggplot(temp2, aes(x=BAND_ID, y=AREA_FRAC)) + geom_bar(aes(y=cumsum(AREA_FRAC)/6, fill=factor(CLASS)), stat="identity") + theme_bw() + labs(x="Elevetation (m)", y="Area Fraction", color="Land Cover", title="Vegetation Class Hysometry")
ggplot(temp2, aes(x=BAND_ID, y=AREA_FRAC)) + geom_bar(aes(y=AREA_FRAC, fill=factor(CLASS)), stat="identity") + theme_bw() + labs(x="Elevetation (m)", y="Area Fraction", color="Land Cover", title="Vegetation Class Hysometry")
ggplot(temp2, aes(x=BAND_ID, y=AREA_FRAC)) + geom_bar(aes(y=AREA_FRAC, fill=factor(CLASS)), stat="identity") + theme_bw() + labs(x="Elevetation (m)", y="Area Fraction", fill="Land Cover", title="Vegetation Class Hysometry")
ggplot(temp2, aes(x=BAND_ID, y=AREA_FRAC)) + geom_bar(aes(y=AREA_FRAC, color=factor(CLASS), fill=factor(CLASS)), stat="identity") + theme_bw() + labs(x="Elevetation (m)", y="Area Fraction", fill="Land Cover", title="Vegetation Class Hysometry")
ggplot(temp2, aes(x=BAND_ID, y=AREA_FRAC)) + geom_bar(aes(y=AREA_FRAC, fill=factor(CLASS)), color="grey", stat="identity") + theme_bw() + labs(x="Elevetation (m)", y="Area Fraction", fill="Land Cover", title="Vegetation Class Hysometry")
ggplot(temp2, aes(x=BAND_ID, y=AREA_FRAC)) + geom_bar(aes(y=AREA_FRAC, color=factor(CELL_ID), fill=factor(CLASS)), stat="identity") + theme_bw() + labs(x="Elevetation (m)", y="Area Fraction", fill="Land Cover", title="Vegetation Class Hysometry")
ggplot(temp2, aes(x=BAND_ID, y=AREA_FRAC)) + geom_bar(aes(y=AREA_FRAC, color=factor(CELL_ID), fill=factor(CLASS)), stat="identity") + theme_bw() + labs(x="Elevetation (m)", y="Area Fraction", color="Cell ID", fill="Land Cover", title="Vegetation Class Hysometry")
ggplot(temp2, aes(x=BAND_ID, y=AREA_FRAC)) + geom_bar(aes(y=AREA_FRAC, color=factor(CELL_ID), fill=factor(CLASS)), stat="identity") + theme_bw() + labs(x="Elevatation (m)", y="Area Fraction", color="Cell ID", fill="Land Cover", title="Vegetation Class Hysometry")
ggplot(temp2, aes(x=BAND_ID, y=AREA_FRAC)) + geom_bar(aes(y=AREA_FRAC, color=factor(CELL_ID), fill=factor(CLASS)), stat="identity") + theme_bw() + labs(x="Elevatation (m)", y="Area Fraction", color="Cell ID", fill="Land Cover", title="Vegetation Class Hysometry") + coord_flip()
ggplot(temp2, aes(x=BAND_ID, y=AREA_FRAC)) + geom_bar(aes(y=AREA_FRAC, fill=factor(CLASS)), stat="identity") + theme_bw() + labs(x="Elevatation (m)", y="Area Fraction", fill="Land Cover", title="Vegetation Class Hysometry") + coord_flip()
ggplot(temp2, aes(x=BAND_ID, y=AREA_FRAC)) + geom_bar(aes(y=AREA_FRAC, fill=factor(CLASS)), stat="identity") + theme_bw() + labs(x="Elevatation (m)", y="Area Fraction", fill="Land Cover", title="Vegetation Class Hypsometry") + coord_flip()
y <- ggplot(temp2, aes(x=BAND_ID, y=AREA_FRAC)) + geom_bar(aes(y=AREA_FRAC, fill=factor(CLASS)), stat="identity") + theme_bw() + labs(x="Elevatation (m)", y="Area Fraction", fill="Land Cover", title="Vegetation Class Hypsometry") + coord_flip()
y
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
y <- plot_hypsometry(bridge_hru)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
y <- plot_hypsometry(bridge_hru)
y
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
y
y <- plot_hypsometry(bridge_hru)
y
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
rm(plot_hypsometry)
z <- plot_hypsometry(place_hru)
z <- plot_veg_hypsometry(place_hru)
z
rm(temp, temp2)
rm(ii)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/make_VIC_param.r')
peyto_hru <- read.delim("Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/peyto_hru.txt")
View(peyto_hru)
View(peyto_hru)
View(place_hru)
View(bridge_hru)
bridge_hru[-1]
bridge_hru <- bridge_hru[-1]
View(bridge_hru)
place_hru <- place_hru[-1]
View(place_hru)
peyto_hru$AREA_FRAC <- peyto_hru$SHAPE_AREA/0.0625^2
View(peyto_hru)
sum(peyto_hru$AREA_FRAC)
sum(bridge_hru$AREA_FRAC)
sum(place_hru$AREA_FRAC)
plot_veg_hypsometry(peyto_hru)
View(root_depths)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(peyto_hru)
plot_veg_hypsometry(place_hru)
plot_veg_hypsometry(bridge_hru)
peyto_hru_params <- make_VIC_param(peyto_hru, root_depths, write_vpf=TRUE, write_snb=TRUE, max_bands=15)
rm(y,z)
rm(nms)
library("ggplot2", lib.loc="~/R/win-library/3.0")
ggplot(peyto_hru, aes(x=BAND_ID, y=AREA_FRAC)) + geom_bar(aes(fill=factor(CLASS)), stat="identity")
ggplot(peyto_hru, aes(x=CLASS, y=AREA_FRAC)) + geom_bar(aes(fill=factor(CLASS)), stat="identity")
ggplot(place_hru, aes(x=CLASS, y=AREA_FRAC)) + geom_bar(aes(fill=factor(CLASS)), stat="identity")
ggplot(bridge_hru, aes(x=CLASS, y=AREA_FRAC)) + geom_bar(aes(fill=factor(CLASS)), stat="identity")
ggplot(bridge_hru, aes(x=CLASS, y=AREA_FRAC/6)) + geom_bar(aes(fill=factor(CLASS)), stat="identity")
ggplot(bridge_hru, aes(x=CLASS, y=AREA_FRAC)) + geom_bar(aes(fill=factor(CLASS)), stat="identity")
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
0.08333*12
0.0833333*12
0.083333333333333333*12
round(0.083333333333333333,5)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/make_VIC_param.r')
rm(make_veg_param_file)
rm(band_tmp)
plot_veg_hypsometry(place_hru)
plot_veg_hypsometry(bridge_hru)
plot_veg_hypsometry(peyto_hru)
natfa_hru <- read.csv("Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/natfa_hru.txt")
View(natfa_hru)
natfa_hru$AREA_FRAC <- natfa_hru$SHAPE_AREA/0.0625^2
View(natfa_hru)
sum(natfa_hru$AREA_FRAC)
plot_veg_hypsometry(natft_hru)
natft_hru <- natfa_hru
rm(natfa_hru)
plot_veg_hypsometry(natft_hru)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(natft_hru, individual=FALSE)
unique(natft_hru$CELL_ID)
length(unique(natft_hru$CELL_ID))
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
length(unique(natft_hru$CELL_ID))
plot_veg_hypsometry(natft_hru, individual=FALSE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(natft_hru, individual=FALSE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(natft_hru, individual=FALSE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(natft_hru, individual=FALSE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(natft_hru, individual=FALSE)
plot_veg_hypsometry(bridge_hru, individual=FALSE)
plot_veg_hypsometry(natft_hru, individual=FALSE)
plot_veg_hypsometry(place_hru, individual=FALSE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(place_hru, by_cell=FALSE)
plot_veg_hypsometry(place_hru, by_cell=TRUE)
natft_hru_prams <- make_VIC_param(natft_hru, root_depths)
summary(natft_hru_prams)
natft_hru_params <- natft_hru_prams
rm(natft_hru_prams)
natft_hru_params$NO_BANDS
max(natft_hru_params$NO_BANDS)
natft_hru_params <- make_VIC_param(natft_hru, root_depths, write_vpf = TRUE, write_snb = TRUE, max_bands = 11)
natft_cells <- unique(natft$CELL_ID)
natft_cells <- unique(natft_hru$CELL_ID)
natft_cells
tiedemann_hru <- read.csv("Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/tiedemann_hru.txt")
View(tiedemann_hru)
rm(tiedemann_hru)
tiedemann_hru <- read.csv("Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/tiedemann_hru.txt")
View(tiedemann_hru)
plot_veg_hypsometry(tiedemann_hru)
tiedemann_hru$AREA_FRAC <- tiedemann_hru$SAHPE_AREA/0.0625^2
View(tiedemann_hru)
names(tiedemann_hru)
names(tiedemann_hru)[4]
names(tiedemann_hru)[5]
names(tiedemann_hru)[5] <- "SHAPE_AREA"
View(tiedemann_hru)
plot_veg_hypsometry(tiedemann_hru)
plot_veg_hypsometry(tiedemann_hru, by_cell=FALSE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(tiedemann_hru)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(tiedemann_hru)
tiedemann_hru_params <- make_VIC_param(tiedemann_hru, root_depths)
order(tiedemann_hru$, tiedemann_hru$AREA_FRAC)
order(tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC)
tiedemann_hru[order(tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),]
tiedemann_hru[order(tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC, tiedemann_hru$CELL_ID),]
ggplot(tiedemann_hru[order(tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], aes(x=cumsum(AREA_FRAC), y=ELEVATION)) + goem_line()
ggplot(tiedemann_hru[order(tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], aes(x=cumsum(AREA_FRAC), y=ELEVATION)) + geom_line()
ggplot(tiedemann_hru[order(tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], aes(x=cumsum(AREA_FRAC), y=ELEVATION)) + geom_line() + facet_wrap(~CELL_ID)
ggplot(tiedemann_hru[order(tiedemann_hru$CELL_ID, tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], aes(x=cumsum(AREA_FRAC), y=ELEVATION)) + geom_line() + facet_wrap(~CELL_ID)
order(tiedemann_hru$CELL_ID, tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC)
tiedemann_hru[order(tiedemann_hru$CELL_ID, tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),]
ggplot(tiedemann_hru[order(tiedemann_hru$CELL_ID, tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], aes(x=cumsum(AREA_FRAC), y=ELEVATION, color=CELL_ID)) + geom_line()
ggplot(tiedemann_hru[order(tiedemann_hru$CELL_ID, tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], aes(x=cumsum(AREA_FRAC), y=ELEVATION, color=as.factor(CELL_ID))) + geom_line()
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
plot_hypsometry(tiedemann_hru)
plot_hypsometry(tiedemann_hru, by_cell=FALSE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
plot_hypsometry(tiedemann_hru, by_cell=FALSE)
plot_hypsometry(tiedemann_hru)
plot_hypsometry(tiedemann_hru)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
plot_hypsometry(tiedemann_hru)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
plot_hypsometry(tiedemann_hru)
ddply(tiedemann_hru, .(CELL_ID, ELEVATION))
ddply(tiedemann_hru, .(CELL_ID, ELEVATION), summarise, cumsum(AREA_FRAC))
ddply(tiedemann_hru, .(CELL_ID), summarise, cumsum(AREA_FRAC))
ddply(tiedemann_hru[order(tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], .(CELL_ID), summarise, cumsum(AREA_FRAC))
ddply(tiedemann_hru[order(tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], .(CELL_ID), summarise, cumsum(AREA_FRAC))[,2]
ddply(tiedemann_hru[order(tiedemann_hru$CELL_ID,tiedemann_hru$ELEVATION, tiedemann_hru$AREA_FRAC),], .(CELL_ID), summarise, cumsum(AREA_FRAC))[,2]
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
plot_hypsometry(tiedemann_hru)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
plot_hypsometry(tiedemann_hru)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
plot_hypsometry(tiedemann_hru)
plot_hypsometry(tiedemann_hru, by_cell=FALSE)
plot_hypsometry(place_hru)
plot_hypsometry(peyto_hru)
plot_hypsometry(bridge_hru)
plot_hypsometry(natft_hru)
plot_hypsometry(natft_hru, by_cell=FALSE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
source('~/.active-rstudio-document')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_hypsometry.r')
make_VIC_param(tiedemann_hru, root_depths, write_vpf=TRUE, write_snb=TRUE)
tiedemann_hru_params$CELL_ID
plot_veg_hypsometry(tiedemann_hru)
plot_veg_hypsometry(tiedemann_hru, by_cell = TRUE)
plot_veg_hypsometry(peyto_hru, by_cell = TRUE)
plot_veg_hypsometry(place_hru, by_cell = TRUE)
plot_veg_hypsometry(bridge_hru, by_cell = TRUE)
View(bridge_hru)
plot_veg_hypsometry(bridge_hru)
x <- do.call(cbind, list(bridge_hru, peyto_hru, place_hru, tiedemann_hru))
x <- do.call(rbind, list(bridge_hru, peyto_hru, place_hru, tiedemann_hru))
View(x)
plot_veg_hypsometry(x)
x$basin <- "Bridge"
View(x)
x$basin[189:234] <- "Peyto"
View(x)
x$basin[235:355] <- "Place"
x$basin[356:553] <- "Tiedemann"
View(x)
all_hru <- x
rm(x)
View(all_hru)
plot_veg_hypsometry(all_hru, be_cell=TRUE)
plot_veg_hypsometry(all_hru, by_cell=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
library("ggplot2", lib.loc="C:/Apps/R-3.1.2/library")
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
ggsave(filename="veg_hpsometry.png", width=8, height=6, units="in", dpi=600)
getwd()
plot_veg_hypsometry(all_hru, by_cell=TRUE)
test <- c("a", "b", "c")
for (t in test) print(t)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
for (t in test) print(t)
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
ddply(all_hru, .(basin), summarize, Area = sum(AREA_FRAC))
library("plyr", lib.loc="C:/Apps/R-3.1.2/library")
ddply(all_hru, .(basin), summarize, Area = sum(AREA_FRAC))
debugSource('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
ggsave(filename="veg_hpsometry.png", width=8, height=6, units="in", dpi=600)
ggsave(filename="veg_hpsometry.png", width=10, height=6, units="in", dpi=600)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
ggsave(filename="veg_hpsometry.png", width=10, height=6, units="in", dpi=600)
plot_veg_hypsometry(all_hru, by_basin=TRUE)
ggsave(filename="veg_hpsometry.png", width=10, height=6, units="in", dpi=600)
plot_veg_hypsometry(all_hru, by_basin=TRUE)
ggsave(filename="veg_hpsometry_v2.png", width=11, height=5, units="in", dpi=600)
ggsave(filename="veg_hpsometry_v2.svg", width=11, height=5, units="in", dpi=600)
source('Z:/data/projects/hydrology/vic_gen2/input/vegetation/hru/code/src_r/plot_veg_hypsometry.r')
plot_veg_hypsometry(all_hru, by_basin=TRUE)
ggsave(filename="veg_hpsometry_v2.png", width=11, height=5, units="in", dpi=600)
ggsave(filename="veg_hpsometry_v2.svg", width=11, height=5, units="in", dpi=600)
